var loadscreenAssets={graphics:{background:"gfx/background.png",title:"gfx/title.png",progressbg:"gfx/progressbg.png",progressbar:"gfx/progressbar.png",startbutton:"gfx/startbutton.png",checkbox:"gfx/checkbox.png",labelsoundeffects:"gfx/labelsoundeffects.png",labelfullscreen:"gfx/labelfullscreen.png"}},gameAssets={graphics:{topicons:"gfx/topicons.png",menudrawer:"gfx/menudrawer.png",menubackground:"gfx/menubackground.png",menubuttons:"gfx/menubuttons.png",levelprogressbg:"gfx/levelprogressbg.png",lockicon:"gfx/lockicon.png",vertex:"gfx/vertex.png",taphl:"gfx/taphl.png",digits:"gfx/digits.png",minivertex:"gfx/minivertex.png",tutorial1:"gfx/tutorial1.png",tutorial2:"gfx/tutorial2.png",tutorial3:"gfx/tutorial3.png",tutorial4:"gfx/tutorial4.png",arrow:"gfx/arrow.png"},data:{levels:"data/levels.json",user:"data/user.json"},sfx:{pick:["sfx/pick.mp3"],drop:["sfx/drop.mp3"],victory:["sfx/victory.mp3"],intro:["sfx/intro.mp3"]}},t_assetLoader=new ooze.AssetLoader;t_assetLoader.handler.sfx=function(t,e){var n=new Howl({src:t,autoplay:!1,loop:!1,volume:1,onload:function(){e(n)},onloaderror:e})};var t_defaultConfig={sound:!0,unlocked:0},t_config=new ooze.Configuration("Tronix2_cfg",t_defaultConfig),t_loadscreenState=new ooze.State;t_loadscreenState.init=function(){var t=this;this.gfx=t_assetLoader.from("graphics").get("title","progressbg","progressbar","startbutton","checkbox","labelfullscreen","labelsoundeffects"),this.lockInput=!0,this.lockOptions=!0,this.titleY=550,this.titleOpacity=0,this.progressbarOpacity=0,this.startbuttonOpacity=0,this.startbuttonPressed=!1,this.startbuttonActive=!1,this.optionsOpacity=0,this.proceeding=!1,this.optionSoundEffects=t_config.sound,this.optionFullscreen=!1,this.chkboxSoundEffectsRect=[172,1031,420,60],this.chkboxSoundEffectsPressed=!1,this.chkboxSoundEffectsActive=!1,this.chkboxFullscreenRect=[172,1125,420,60],this.chkboxFullscreenPressed=!1,this.chkboxFullscreenActive=!1,this.progress=0;this.twIntro1=new ooze.Tween(550,540,500,function(e){t.titleY=e},null,ooze.ease.quadInOut),this.twIntro2=new ooze.Tween(0,1,500,function(e){t.titleOpacity=e,t.progressbarOpacity=e},null,ooze.ease.linear),this.twShowOptions=new ooze.Tween(0,1,250,function(e){t.optionsOpacity=e},function(){t.lockOptions=!1},ooze.ease.linear),this.registerEvents()},t_loadscreenState.registerEvents=function(){var t=this;function e(t){return ooze.pointInCircle(t[0],t[1],365,676,139)}function n(t,e){return ooze.pointInRect(e[0],e[1],t[0],t[1],t[2],t[3])}t_input.on("press",function(n){t.lockInput||e(n)&&(t.startbuttonPressed=t.startbuttonActive=!0)}).bindTo(this),t_input.on("move",function(n){t.lockInput||t.startbuttonActive&&(t.startbuttonPressed=e(n))}).bindTo(this),t_input.on("release",function(){t.lockInput||(t.startbuttonPressed&&(t.lockInput=!0,t.proceed()),t.startbuttonPressed=t.startbuttonActive=!1)}).bindTo(this),t_input.on("press",function(e){t.lockInput||t.lockOptions||(n(t.chkboxSoundEffectsRect,e)?t.chkboxSoundEffectsPressed=t.chkboxSoundEffectsActive=!0:n(t.chkboxFullscreenRect,e)&&(t.chkboxFullscreenPressed=t.chkboxFullscreenActive=!0))}).bindTo(this),t_input.on("move",function(e){t.lockInput||t.lockOptions||(t.chkboxSoundEffectsActive&&(t.chkboxSoundEffectsPressed=n(t.chkboxSoundEffectsRect,e)),t.chkboxFullscreenActive&&(t.chkboxFullscreenPressed=n(t.chkboxFullscreenRect,e)))}).bindTo(this),t_input.on("release",function(e){t.lockInput||t.lockOptions||(t.chkboxSoundEffectsPressed?t.optionSoundEffects=!t.optionSoundEffects:t.chkboxFullscreenPressed&&(t.optionFullscreen=!t.optionFullscreen),t.chkboxSoundEffectsPressed=t.chkboxSoundEffectsActive=!1,t.chkboxFullscreenPressed=t.chkboxFullscreenActive=!1)}).bindTo(this)},t_loadscreenState.draw=function(){this.surface.clear(),this.paint.setAlpha(this.titleOpacity),this.paint.graphics(this.gfx.title,210,this.titleY),this.paint.setAlpha(this.progressbarOpacity),this.paint.graphics(this.gfx.progressbg,212,663),this.paint.tile(this.gfx.progressbar,214,665,5,20,0,0);var t=286*this.progress;this.paint.rectFill(219,665,t,20,"#f29334"),this.paint.tile(this.gfx.progressbar,219+t,665,5,20,5,0),this.paint.setAlpha(this.startbuttonOpacity),this.paint.tile(this.gfx.startbutton,227,540,278,278,this.startbuttonPressed?278:0,0),this.paint.setAlpha(this.optionsOpacity),this.paint.tile(this.gfx.checkbox,172,1031,60,60,this.optionSoundEffects?60:0,this.chkboxSoundEffectsPressed?60:0),this.paint.tile(this.gfx.checkbox,172,1125,60,60,this.optionFullscreen?60:0,this.chkboxFullscreenPressed?60:0),this.paint.tile(this.gfx.labelsoundeffects,270,1044,290,31,0,this.chkboxSoundEffectsPressed?31:0),this.paint.tile(this.gfx.labelfullscreen,270,1138,220,31,0,this.chkboxFullscreenPressed?31:0),this.paint.setAlpha()},t_loadscreenState.enter=function(){this.twIntro1.start(),this.twIntro2.start()},t_loadscreenState.exit=function(){},t_loadscreenState.trackProgress=function(t,e){t_loadscreenState.progress=t/e},t_loadscreenState.showMenu=function(){var t=this;this.twIntro1.finish(),this.twIntro2.finish(),new ooze.Tween(1,0,500,function(e){t.progressbarOpacity=e},null,ooze.ease.linear).start(),new ooze.Tween(540,320,700,function(e){t.titleY=e},function(){new ooze.Tween(0,1,250,function(e){t.startbuttonOpacity=e},function(){t.lockInput=!1,setTimeout(function(){t.proceeding||t.twShowOptions.start()},250)},ooze.ease.linear).start()},ooze.ease.quadInOut).start()},t_loadscreenState.proceed=function(){var t=this;this.proceeding=!0,t_config.sound=this.optionSoundEffects,t_config.save(),this.optionFullscreen&&screenfull.isEnabled&&screenfull.toggle(),this.twShowOptions.stop(),new ooze.Tween(t.optionsOpacity,0,500,function(e){t.optionsOpacity=e},null,ooze.ease.linear).start(),new ooze.Tween(1,0,500,function(e){t.titleOpacity=t.startbuttonOpacity=e},function(){t_game.setState(t_gamescreenState)},ooze.ease.linear).start()};var t_gamescreenState=new ooze.State,Button=function(t){var e=t_gamescreenState,n=this;this.x=t.x||0,this.y=t.y||0,this.width=t.width||50,this.height=t.height||50,this.gfx=t.gfx,this.tileNormal=t.tileNormal||[0,0],this.tilePressed=t.tilePressed||[0,0],this.pushRepeat=t.pushRepeat||!1,this.enabled=!0;var o=!1,i=!1;function s(t){return ooze.pointInRect(t[0],t[1],n.x,n.y,n.width,n.height)}this.draw=function(){var t=o?n.tilePressed:n.tileNormal;e.paint.tile(n.gfx,n.x,n.y,n.width,n.height,t[0],t[1])};var a=null;function r(e){e=e||0,t.onPush instanceof Function&&t.onPush(),a=setTimeout(function(){r(Math.min(e+1,20))},0===e?400:120-4*e)}t_input.on("press",function(t){n.enabled&&s(t)&&(o=i=!0,n.pushRepeat&&r())}).bindTo(e),t_input.on("move",function(t){n.enabled&&i&&((o=s(t))?!a&&n.pushRepeat&&r():(clearTimeout(a),a=null))}).bindTo(e),t_input.on("release",function(e){n.enabled&&(o&&(!n.pushRepeat&&t.onPush instanceof Function?t.onPush():(clearTimeout(a),a=null)),o=i=!1)}).bindTo(e)},IconPane=function(){var t=t_gamescreenState,e=this,n=t_assetLoader.from("graphics").get("topicons");this.alpha=0;var o=new Button({x:460,y:30,width:100,height:100,gfx:n,onPush:function(){t_config.sound=!t_config.sound,t_config.save(),r()}}),i=new Button({x:590,y:30,width:100,height:100,gfx:n,onPush:function(){screenfull.isEnabled&&screenfull.toggle()}}),s={on:[[0,0],[0,100]],off:[[100,0],[100,100]]},a={on:[[200,0],[200,100]],off:[[300,0],[300,100]]};function r(){o.tileNormal=t_config.sound?s.on[0]:s.off[0],o.tilePressed=t_config.sound?s.on[1]:s.off[1]}function l(){var t=screenfull.isFullscreen;i.tileNormal=t?a.off[0]:a.on[0],i.tilePressed=t?a.off[1]:a.on[1]}r(),l(),screenfull.isEnabled&&document.addEventListener(screenfull.raw.fullscreenchange,l),this.draw=function(){t.paint.setAlpha(.5*e.alpha),t.paint.rectFill(0,0,720,160,"#121212"),t.paint.rectFill(0,160,720,3,"#444"),t.paint.setAlpha(e.alpha),o.draw(),i.draw(),t.paint.setAlpha()},this.enable=function(){o.enabled=i.enabled=!0},this.disable=function(){o.enabled=i.enabled=!1}},OptionsPane=function(t){var e=t_gamescreenState,n=this,o=t_assetLoader.from("graphics").get("menudrawer","menubackground","levelprogressbg","menubuttons","lockicon","digits","minivertex"),i=310;this.alpha=0;var s=0,a=!1,r=e.digitFont,l=1,c=e.nLevels,u=0;function h(){u=l/c}var f=new ooze.Surface({width:110,height:190});function p(){function t(t){return[t[0]/720*110,t[1]/1280*190]}var n=e.levelData[l-1],i=f.render,s=n.V,a=n.E;f.clear(),i.setAlpha(.7);for(var r=190,c=0,u=s.length;u--;){var h=(b=t(s[u]))[1];h-7<r&&(r=h-7),h+7>c&&(c=h+7)}var p=(190-c-r)/2;for(u=a.length;u--;){var d=a[u],g=t(s[d[0]]),v=t(s[d[1]]);i.line(g[0],g[1]+p,v[0],v[1]+p,e.colors.unsolved,3)}for(i.setAlpha(),u=s.length;u--;){var b=t(s[u]);i.graphics(o.minivertex,b[0]-7,b[1]-7+p)}}var d=new Button({x:20,y:1e3,width:150,height:150,gfx:o.menubuttons,tileNormal:[0,0],tilePressed:[0,150],onPush:function(){!e.debugMode&&l>t_config.unlocked||(e.nextArrow.hide(),e.loadLevel(l),n.close(),e.debugMode||(1===l?(e.tutorialAt=0,e.displayTutorial("tutorial1",800)):e.hideTutorial()))}}),g=new Button({x:380,y:1e3,width:150,height:150,gfx:o.menubuttons,tileNormal:[150,0],tilePressed:[150,150],pushRepeat:!0,onPush:function(){l>1&&(l--,h(),p())}}),v=new Button({x:550,y:1e3,width:150,height:150,gfx:o.menubuttons,tileNormal:[300,0],tilePressed:[300,150],pushRepeat:!0,onPush:function(){l<c&&(l++,h(),p())}});function b(e){e>i?e=i:e<0&&(e=0),s=e,d.y=v.y=g.y=1310-e;var n=e/i;t&&t.onMove instanceof Function&&t.onMove(n)}function x(){0===s?t&&t.onClose&&(a=!1,t.onClose(),n.disable()):s===i&&t&&t.onOpen&&(a=!0,t.onOpen(),n.enable())}var w=!1,m=0,_=0,k=!1,A=null,P=0;this.setLevel=function(t){l=t,h(),p()},t_input.on("press",function(t){if(!k){var o=1222-s;ooze.pointInRect(t[0],t[1],0,o,720,58)?(w=!0,m=t[1],_=s,a||n.setLevel(e.currentLevel),P=Date.now()/1e3):a&&ooze.pointInRect(t[0],t[1],0,180,720,o-180)&&n.close()}}).bindTo(e),t_input.on("move",function(t){if(!k&&w){var e=m-t[1];b(_+e)}}).bindTo(e),t_input.on("release",function(t){if(!k&&w){if(w=!1,A&&(A.stop(),A=null),s===i||0===s)return Date.now()/1e3-P<=.25&&!1===a&&0===s&&n.open(),void x();var e=s,o=(a?s>i-i/10:s>i/5)?i:0;k=!0,A=new ooze.Tween(e,o,100,function(t){b(t)},function(){k=!1,A=null,x()},ooze.ease.quadInOut).start()}}).bindTo(e),this.draw=function(){e.paint.setAlpha(n.alpha),e.paint.tile(o.menudrawer,0,1222-s,720,58,0,w?58:0),s>0&&(e.paint.graphics(o.menubackground,0,1280-s),d.draw(),g.draw(),v.draw(),t_config.unlocked>=l?e.paint.surface(f,225,1285-s):e.paint.graphics(o.lockicon,228,1330-s),e.paint.graphics(o.levelprogressbg,23,1480-s),e.paint.rectFill(25,1482-s,669*u,18,e.colors.progress),e.paint.bmptext(r,l+"/"+c,360,1528-s,0,1)),e.paint.setAlpha()},this.enable=function(){d.enabled=g.enabled=v.enabled=!0},this.disable=function(){d.enabled=g.enabled=v.enabled=!1},this.lock=function(){k=!0},this.unlock=function(){k=!1},this.setPullHeight=function(t){s=t},this.setMaxPullHeight=function(){s=i},this.open=function(t,e){t=t||200,A&&(A.stop(),A=null),k=!0,A=new ooze.Tween(0,i,t,function(t){b(t)},function(){k=!1,A=null,x()},ooze.ease.quadInOut).start()},this.close=function(t,e){t=t||200,A&&(A.stop(),A=null),k=!0,A=new ooze.Tween(s,0,t,function(t){b(t)},function(){k=!1,A=null,x()},ooze.ease.quadInOut).start()},this.isOpen=function(){return a}},NextArrow=function(t){var e=t_gamescreenState,n=this;this.enabled=!1,this.shown=!1;var o=t_assetLoader.from("graphics").get("arrow"),i=0,s=120,a=Math.floor(o.width/s),r=Math.floor(o.height/s),l=0,c=a*r,u=[0,0],h=0;function f(t){u=[t%a*s,Math.floor(t/a)*s]}var p=null;function d(){p&&(clearInterval(p),p=null)}function g(t){h=t}var v=new ooze.Tween(0,10,500,g,function(){b.restart()},ooze.ease.linear),b=new ooze.Tween(10,0,500,g,function(){v.restart()},ooze.ease.linear);function x(){b.stop(),v.stop()}t_input.on("press",function(e){n.enabled&&ooze.pointInRect(e[0],e[1],560,1070,s+10,s)&&t.onPush instanceof Function&&t.onPush()}).bindTo(e),this.draw=function(){n.shown&&(e.paint.setAlpha(i),e.paint.tile(o,560+h,1070,s,s,u[0],u[1]),e.paint.setAlpha())},this.show=function(){n.shown=!0,new ooze.Tween(0,1,250,function(t){i=t},function(){n.enabled=!0},ooze.ease.linear).start(),p&&clearInterval(p),l=0,p=setInterval(function(){n.enabled&&(++l>=c&&(l=-20,f(0)),l>=0&&f(l))},50),h=0,v.start()},this.hide=function(t){n.enabled=!1,t?new ooze.Tween(1,0,250,function(t){i=t},function(){d(),x(),n.shown=!1},ooze.ease.linear).start():(d(),x(),n.shown=!1)}},GameGraph=function(t,e){var n;for(this.V=[],this.E=[],this.renderOrder=[],n=0;n<t.length;n++)this.V.push(t[n].slice()),this.renderOrder.push(n);for(n=0;n<e.length;n++)this.E.push(e[n].slice())};t_gamescreenState.checkSolvedState=function(){function t(t,e,n){var o=ooze.movePoint(t[0],t[1],e[0],e[1],n),i=ooze.movePoint(e[0],e[1],t[0],t[1],n);t[0]=o[0],t[1]=o[1],e[0]=i[0],e[1]=i[1]}var e,n=this.graph.V,o=this.graph.E;for(e=0;e<o.length-1;e++)for(var i=e+1;i<o.length;i++){var s=o[e],a=o[i],r=s[0],l=s[1],c=a[0],u=a[1],h=[n[r][0],n[r][1]],f=[n[l][0],n[l][1]],p=[n[c][0],n[c][1]],d=[n[u][0],n[u][1]];if(t(h,f,42),t(p,d,42),ooze.linesIntersect(h[0],h[1],f[0],f[1],p[0],p[1],d[0],d[1]))return!1}for(e=0;e<n.length;e++){var g=n[e];for(i=0;i<o.length;i++){var v=o[i];if(v[0]!=e&&v[1]!=e){h=[n[v[0]][0],n[v[0]][1]],f=[n[v[1]][0],n[v[1]][1]];var b=[g[0],g[1]];if(ooze.pointToLineDistance(b[0],b[1],h[0],h[1],f[0],f[1])<42)return!1}}}return!0},t_gamescreenState.loadLevel=function(t){this.currentLevel=t,t>t_config.unlocked&&(t_config.unlocked=t,t_config.save()),this.solved=!1;var e=this.levelData[this.currentLevel-1];this.graph=new GameGraph(e.V,e.E),this.redrawGame(),t_config.sound&&this.sfx.intro.play()},t_gamescreenState.registerGameEvents=function(){var t=this;t.capturedVertex=null;var e=[0,0],n=new ooze.Tween(0,1,150,function(e){t.hlAlpha=e,t.redrawGame()},null,ooze.ease.linear);t_input.on("press",function(o){if(!t.lockGame)for(var i=t.graph.V,s=t.graph.renderOrder,a=0;a<i.length;a++){var r=s[a],l=i[r];l[0],l[1];if(ooze.pointInCircle(o[0],o[1],l[0],l[1],42)){t.capturedVertex=l,t.capturedIndex=r,e[0]=o[0]-l[0],e[1]=o[1]-l[1],s.splice(s.indexOf(r),1),s.unshift(r),n.restart(),t_config.sound&&t.sfx.pick.play();break}}}).bindTo(this),t_input.on("move",function(n){if(!t.lockGame&&t.capturedVertex){var o=n[0]-e[0],i=n[1]-e[1];o>=42&&o<=678&&(t.capturedVertex[0]=o),i>=42&&i<=1158&&(t.capturedVertex[1]=i),t.redrawGame()}}).bindTo(this),t_input.on("release",function(e){if(!t.lockGame&&t.capturedVertex){t.capturedVertex=null,t.capturedIndex=-1;var n=t.solved;t.solved=t.checkSolvedState(),t.redrawGame();var o=!n&&t.solved;o&&!t.nextArrow.shown&&t.currentLevel<t.nLevels&&t.nextArrow.show(),t_config.sound&&(o&&t.sfx.victory.play(),t.sfx.drop.play()),!t.debugMode&&t.solved&&(1===t.currentLevel&&0===t.tutorialAt?(t.tutorialAt=1,t.displayTutorial("tutorial2",250)):2===t.currentLevel&&2===t.tutorialAt&&(t.tutorialAt=3,t.displayTutorial("tutorial4",250)))}}).bindTo(this)},t_gamescreenState.redrawGame=function(){this.gameSurface.clear();var t=this.graph,e=t.V,n=t.E,o=this.gameSurface.render,i=this.capturedIndex,s=this.solved,a=n.length;for(o.setAlpha(.7);a--;){var r,l=n[a],c=e[l[0]],u=e[l[1]];r=i===l[0]||i===l[1]?this.colors.highlight:s?this.colors.solved:this.colors.unsolved,o.line(c[0],c[1],u[0],u[1],r,18)}for(o.setAlpha(),a=e.length;a--;){var h=e[p=t.renderOrder[a]];o.tile(this.gfx.vertex,h[0]-42,h[1]-42,84,84,s?84:0,0)}if(i>-1){o.setAlpha(this.hlAlpha);var f=e[i];o.graphics(this.gfx.taphl,f[0]-73,f[1]-73),o.setAlpha()}if(this.debugMode)for(a=e.length;a--;){var p;h=e[p=t.renderOrder[a]];this.userData.debug.showVertexIndex&&o.text(p.toString(),h[0]-42-15,h[1]-42-15,"#fff","left","20px sans-serif"),this.userData.debug.showVertexPosition&&o.text(h[0]+", "+h[1],h[0]+42,h[1]+42,"#ff0","left","20px sans-serif")}},t_gamescreenState.displayTutorial=function(t,e){e=e||0;var n=this;this.hideTutorial(),this.tutorialTimeout=setTimeout(function(){n.showTutorial=!0,n.tutorialGfx=t_assetLoader.from("graphics").get(t),n.tutorialTweens[0].start(),n.tutorialTweens[1].start()},e)},t_gamescreenState.hideTutorial=function(){clearTimeout(this.tutorialTimeout),this.tutorialTweens[0].stop(),this.tutorialTweens[1].stop(),this.showTutorial=!1,this.tutorialGfx=null},t_gamescreenState.init=function(){var t=this;this.gfx=t_assetLoader.from("graphics").get("vertex","taphl"),this.sfx=t_assetLoader.from("sfx").get("pick","drop","victory","intro"),this.levelData=t_assetLoader.get("data.levels"),this.userData=t_assetLoader.get("data.user"),this.nLevels=this.levelData.length,this.colors=this.userData.colors||{},this.debugMode=this.userData.debug&&this.userData.debug.enableDebugMode,this.gameAlpha=0,this.gameSurface=new ooze.Surface({width:720,height:1280}),this.lockGame=!0,this.currentLevel=1,this.graph=null,this.capturedIndex=-1,this.solved=!1,this.hlAlpha=0,this.showTutorial=!1,this.tutorialGfx=null,this.tutorialAlpha=0,this.tutorialY=0,this.tutorialAt=0,this.tutorialTimeout=null,this.tutorialTweens=[new ooze.Tween(0,1,250,function(e){t.tutorialAlpha=e},null,ooze.ease.quadIn),new ooze.Tween(960,940,500,function(e){t.tutorialY=e},null,ooze.ease.quadIn,Math.floor)],this.overlayAlpha=0,this.overlayAlphaMax=.4,this.digitFont=new ooze.Font({graphics:t_assetLoader.get("graphics.digits"),size:[30,30],spacing:7,offset:15,widths:{"/":26,0:28,1:12,2:28,3:28,4:27,5:28,6:28,7:23,8:28,9:28}}),this.iconPane=new IconPane,this.optionsPane=new OptionsPane({onMove:function(e){e=ooze.ease.quadIn(e),t.iconPane.alpha=e,t.overlayAlpha=e*t.overlayAlphaMax},onOpen:function(){t.iconPane.enable(),t.lockGame=!0},onClose:function(){t.iconPane.disable(),t.lockGame=!1}}),this.nextArrow=new NextArrow({onPush:function(){!t.optionsPane.isOpen()&&t.currentLevel<=t.nLevels&&(t.capturedVertex=null,t.capturedIndex=-1,t.loadLevel(t.currentLevel+1),t.nextArrow.hide(!0),1===t.tutorialAt?(t.tutorialAt=2,t.displayTutorial("tutorial3",800)):3===t.tutorialAt&&t.hideTutorial())}}),void 0===t_config.unlocked||t_config.unlocked<1?(t_config.unlocked=1,t_config.save()):t_config.unlocked>this.nLevels&&(t_config.unlocked=this.nLevels),this.iconPane.disable(),this.optionsPane.disable(),this.optionsPane.lock(),this.optionsPane.setLevel(this.currentLevel),this.registerGameEvents(),this.debugMode?this.loadLevel(this.userData.debug.skipToLevel||1):this.loadLevel(t_config.unlocked||1)},t_gamescreenState.draw=function(){this.surface.clear(),this.showTutorial&&(this.paint.setAlpha(this.tutorialAlpha),this.paint.graphics(this.tutorialGfx,44,this.tutorialY),this.paint.setAlpha()),this.paint.setAlpha(this.gameAlpha),this.paint.surface(this.gameSurface,0,0),this.nextArrow.draw(),this.paint.setAlpha(),this.overlayAlpha>0&&(this.paint.setAlpha(this.overlayAlpha),this.paint.rectFill(0,0,720,1280,"#555"),this.paint.setAlpha()),this.optionsPane.draw(),this.iconPane.draw()},t_gamescreenState.enter=function(){var t=this,e=1==t_config.unlocked;!this.debugMode&&e?(t.optionsPane.setMaxPullHeight(),setTimeout(function(){new ooze.Tween(0,1,250,function(e){t.iconPane.alpha=e,t.optionsPane.alpha=e,t.gameAlpha=e,t.overlayAlpha=e*t.overlayAlphaMax},function(){setTimeout(function(){t.optionsPane.close(500),1===t.currentLevel&&t.displayTutorial("tutorial1",800)},500)},ooze.ease.linear).start()},150)):new ooze.Tween(0,1,250,function(e){t.optionsPane.alpha=e,t.gameAlpha=e},function(){t.optionsPane.unlock(),t.lockGame=!1},ooze.ease.linear).start()},t_gamescreenState.exit=function(){};var t_game=new ooze.Game({canvasId:"enquero-game",state:t_loadscreenState,simpleLoop:!0,viewMode:"scale-fit"}),t_input=new ooze.Input(t_game);window.addEventListener("load",function(){t_config.load(),t_assetLoader.load({assets:loadscreenAssets,done:function(){t_game.run(),t_assetLoader.load({assets:gameAssets,progress:t_loadscreenState.trackProgress,done:function(){var t=t_assetLoader.get("data.user");t.debug&&t.debug.enableDebugMode?t_game.setState(t_gamescreenState):t_loadscreenState.showMenu()}})}})});